---
import Layout from '../layouts/Layout.astro'

import { profile } from '@/settings'
import { publications } from '@/data/cv'
import { getCollection } from 'astro:content';
import ProfilePictures from '@/assets/profile_pictures.jpg'
import Hero from '@/components/ui/Hero.astro'
import Grid from '@/components/ui/Grid.astro'
import ArticleList from '@/components/ui/ArticleList.astro'

const { fullName, title, institute, research_areas } = profile

const news = (await getCollection('news'))
  .sort((a,b) => new Date(b.data.date) - new Date(a.data.date)) // newest first
  .slice(0, 5); // show 5 recent updates

// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<Layout>
	<!-- Hero Section -->
	<section class='flex items-center gap-12 border-b pb-12'>
		<Hero
			fullName={fullName}
			title={title}
			institute={institute}
			profilePicture={ProfilePictures}
		/>
	</section>

	<!-- Research Areas -->
	<!-- <section class='py-12 border-b'>
		<Grid gridTitle='Research Areas' gridItems={research_areas} />
	</section> -->

	<section class="mt-12">
		<h2 class="text-2xl font-bold mb-4">News</h2>
		<ul class="space-y-3">
		  {news.map((post) => (
			<li>
			  {post.body
				? (
				  <a
					href={`/news/${post.slug}`}
					class="hover:text-accent font-medium"
				  >
					<span>{post.data.date}</span> — {post.data.title}
				  </a>
				)
				: (
				  <span class="text-base-content/80">
					<span>{post.data.date}</span> — {post.data.title}
				  </span>
				)
			  }
			</li>
		  ))}
		</ul>
	  </section>

	<!-- Recent Publications -->
	<section class='py-12 border-t'>
		<ArticleList listTitle='Recent Publications' listItems={publications} />
	</section>
</Layout>
