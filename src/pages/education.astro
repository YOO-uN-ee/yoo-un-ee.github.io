---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { educationExperience } from '../data/education';

const translations = {
    subtitle: { en: 'Milestones', es: 'Mi Trayectoria' },
    title: { en: 'Education', es: 'Experiencia Laboral' },
    description: { en: 'Overview of my academic background and progress.', es: 'Una línea de tiempo de mi trayectoria profesional y logros.' }
};

---

<Layout title={`Education | Jiyoon Pyo`}>
	<Header />
	
	<main class="min-h-screen px-4 sm:px-6 md:px-6">
		<section class="max-w-3xl mx-auto min-h-[calc(100vh-5rem)] pt-24 sm:pt-32 md:pt-48 pb-16 sm:pb-24 fade-in px-2 sm:px-0">
			<div class="max-w-2xl mb-12 sm:mb-16">
				<p class="text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-3 sm:mb-4 tracking-wider uppercase" data-en={translations.subtitle.en} data-es={translations.subtitle.es}>{translations.subtitle.en}</p>
				<h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 dark:text-white" data-en={translations.title.en} data-es={translations.title.es}>
					{translations.title.en}
				</h1>
				<p class="mt-3 sm:mt-4 text-sm sm:text-lg text-gray-600 dark:text-gray-400" data-en={translations.description.en} data-es={translations.description.es}>
					{translations.description.en}
				</p>
			</div>

			<!-- <div class="space-y-8 sm:space-y-12 parallax-section">
				{
					educationExperience.map((education, index) => (
						<div class="relative pl-6 sm:pl-8 border-l-2 border-gray-200 dark:border-gray-700 bg-transparent group cursor-pointer hover:scale-105 transition-all">
							<div class="absolute -left-2 top-0 w-4 h-4 rounded-full bg-gray-400 dark:bg-gray-500 group-hover:scale-125 transition-transform"></div>
							<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2 gap-2 sm:gap-0">
								<h3 class="text-lg sm:text-xl font-semibold text-gray-900 dark:text-white" data-en={education.title} data-es={education.titleES}>{education.title}</h3>
								<span class="text-xs sm:text-sm text-gray-500 dark:text-gray-400 font-medium" data-en={education.year} data-es={education.yearES}>{education.year}</span>
							</div>
							<p class="text-sm sm:text-lg text-gray-600 dark:text-gray-400 font-medium mb-2 sm:mb-3">{education.company}</p>
							<p class="text-sm sm:text-base text-gray-600 dark:text-gray-400 leading-relaxed" data-en={education.description} data-es={education.descriptionES}>{education.description}</p>
						</div>
					))
				}
			</div> -->

			<div class="space-y-8 sm:space-y-12 parallax-section">
				{educationExperience.map((edu) => (
				  <div class="relative pl-6 sm:pl-8 border-l-2 border-gray-200 dark:border-gray-700 bg-transparent group">
					<div class="absolute -left-2 top-0 w-4 h-4 rounded-full bg-gray-400 dark:bg-gray-500 group-hover:scale-125 transition-transform"></div>
			  
					{/* HOVER “CARD” WRAPPER (keeps timeline line stable) */}
					<div class="rounded-xl px-3 sm:px-4 py-3 -ml-3 sm:-ml-4 cursor-pointer
								transition-all duration-200
								hover:bg-gray-50 dark:hover:bg-gray-800/40
								hover:shadow-sm hover:scale-[1.01]">
			  
					  {/* Header row: Institution left, Year+Location right */}
					  <div class="flex items-start justify-between gap-4 mb-2">
						<div>
						  <h3 class="text-lg sm:text-xl font-semibold text-gray-900 dark:text-white">
							{edu.institution}
						  </h3>
						</div>
			  
						<div class="text-right shrink-0">
						  <div class="text-xs sm:text-sm text-gray-500 dark:text-gray-400 font-medium">
							{edu.year}
						  </div>
						  <div class="text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1">
							{edu.location}
						  </div>
						</div>
					  </div>
			  
					  <p class="text-sm sm:text-lg text-gray-600 dark:text-gray-300 font-medium mb-2">
						{edu.degree}
					  </p>
			  
					  {edu.highlights?.length ? (
						<ul class="text-sm sm:text-base text-gray-600 dark:text-gray-400 leading-relaxed space-y-1 mb-3">
						  {edu.highlights.map((h) => (
							<li>
							  <span class="font-medium text-gray-700 dark:text-gray-300">{h.label}:</span>{' '}
							  {h.href ? (
								<a
								  href={h.href}
								  target="_blank"
								  rel="noreferrer"
								  class="underline underline-offset-4 hover:text-gray-900 dark:hover:text-white transition-colors"
								>
								  {h.text}
								</a>
							  ) : (
								<span>{h.text}</span>
							  )}
							</li>
						  ))}
						</ul>
					  ) : null}
			  
					  {/* Activities */}
					  {edu.activities?.length ? (
						<div class="mt-2 space-y-3">
						  {edu.activities.map((a) => (
							<div>
							  {/* Teaching Assistant -> dropdown */}
							  {a.label === 'Teaching Assistant' ? (
								<details class="edu-details">
								  <summary class="flex items-center justify-between gap-2 text-sm font-semibold text-gray-800 dark:text-gray-200 cursor-pointer select-none">
									<span>{a.label}</span>
			  
									{/* triangle icon */}
									<svg class="edu-chevron" width="14" height="14" viewBox="0 0 20 20" aria-hidden="true">
									  <path d="M5 7l5 6 5-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
									</svg>
								  </summary>
			  
								  {a.items?.length ? (
									<ul class="mt-2 space-y-1">
									  {a.items.map((it) => (
										<li class="text-xs sm:text-sm text-gray-600 dark:text-gray-400 flex flex-col sm:flex-row sm:items-baseline sm:justify-between gap-0.5">
										  <span>{it.text}</span>
										  {it.meta ? (
											<span class="text-xs text-gray-500 dark:text-gray-500 font-medium">
											  {it.meta}
											</span>
										  ) : null}
										</li>
									  ))}
									</ul>
								  ) : null}
								</details>
							  ) : (
								<>
								  <p class="text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2">
									{a.label}
								  </p>
			  
								  {a.items?.length ? (
									<ul class="space-y-1">
									  {a.items.map((it) => (
										<li class="text-sm sm:text-base text-gray-600 dark:text-gray-400 flex flex-col sm:flex-row sm:items-baseline sm:justify-between gap-0.5">
										  <span>{it.text}</span>
										  {it.meta ? (
											<span class="text-xs sm:text-sm text-gray-500 dark:text-gray-500 font-medium">
											  {it.meta}
											</span>
										  ) : null}
										</li>
									  ))}
									</ul>
								  ) : null}
								</>
							  )}
							</div>
						  ))}
						</div>
					  ) : null}
					</div>
				  </div>
				))}
			  </div>
			  
		</section>
	</main>

	<Footer />

	<script>
		document.addEventListener('DOMContentLoaded', () => {
			const observerOptions = {
				root: null,
				rootMargin: '0px',
				threshold: 0.1
			};

			const observer = new IntersectionObserver((entries) => {
				entries.forEach(entry => {
					if (entry.isIntersecting) {
						entry.target.classList.add('visible');
					}
				});
			}, observerOptions);

			document.querySelectorAll('.fade-in').forEach(el => {
				observer.observe(el);
			});

			window.addEventListener('scroll', () => {
				const scrolled = window.pageYOffset;
				document.querySelectorAll('.parallax-section').forEach(section => {
					const speed = 0.05;
					(section as HTMLElement).style.transform = `translateY(${scrolled * speed}px)`;
				});
			});
		});
	</script>
</Layout>